<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Slide List - Coral Virtual Microscope</title>
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
    <link rel="stylesheet" href="/static/style.css">
    <script>
			function liveSearch(value){
				value = value.trim(); // remove any spaces around the text
					$.ajax({
						url: "search",
						data: {searchText: value},
						dataType: "json",
						success: function(data){
						$("#slideTable > tbody").html("");
                        $.each(data, function(index, element) {
                                    for (i = 0; i < element.length; i++) {
                                        $("#slideTable tbody").append(
                                              "<tr>" +
                                                    "<td><b><a href='"+element[i]["filename"]+"' target='_blank'>"+element[i]["filename"]+"</a></b></td>" +
                                                    "<td>"+element[i]["number"]+"</td>" +
                                                    "<td>"+element[i]["genus"]+"</td>" +
                                                    "<td>"+element[i]["species"]+"</td>" +
                                                    "<td>"+element[i]["stain"]+"</td>" +
                                                    "<td>"+element[i]["source"]+"</td>" +
                                                    "<td>"+element[i]["contributor"]+"</td>" +
                                                    "<td>"+element[i]["processing"]+"</td>" +
                                                    "<td>"+element[i]["comments"]+"</td>" +
                                                    "<td>"+element[i]["date_sent_to_aperio"]+"</td>" +
                                                    "<td>"+element[i]["infect"]+"</td>" +
                                                    "<td>"+element[i]["collection_site"]+"</td>" +
                                                    "<td>"+element[i]["histopath_description"]+"</td>" +
                                                    "<td>"+element[i]["attachment"]+"</td>" +
                                              "</tr>"
                                        );

                                    }
                                });
						}

					});
			}
		</script>
</head>
<body>
<!-- partial:index.partial.html -->
<div id="wrapper" class="container-fluid">

        <!-- Sidebar -->
    {% include 'sidebar.html' %}

        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid scrolling-wrapper">
                <a href="#menu-toggle" class="glyphicon glyphicon-align-justify" id="menu-toggle"></a>
                <div class="row">
                    <div class="col-lg-12">
                        <input type="text" onkeyup="liveSearch(this.value)" class="top-buffer col-xs-4 col-sm-4 col-md-4 col-lg-4" placeholder="Slide Search">
                        <br><br><br><br>
                        <div id="results"></div> <!-- Results will be printed here -->
                        <table border="1px" id="slideTable" class="table table-striped table-hover">
                            <thead>
                            <tr >
                                <th scope="col">Slide Filename</th>
                                <th scope="col">Slide Number</th>
                                <th scope="col">Genus</th>
                                <th scope="col">Species</th>
                                <th scope="col">Stain</th>
                                <th scope="col">Source</th>
                                <th scope="col">Contributor</th>
                                <th scope="col">Processing</th>
                                <th scope="col">Comments</th>
                                <th scope="col">Date Sent to Aperio</th>
                                <th scope="col">Infect/Non</th>
                                <th scope="col">Collection Site</th>
                                <th scope="col">Histopathologic Description</th>
                                <th scope="col">Attachment</th>

                            </tr>
                            </thead>
                            {% for entry in root_dir.children recursive %}
                            <tr>
                                <th scope="row">
                                    {% if entry.url_path %}
                                    <a href="{{ url_for('slide', path=entry.url_path) }}" target="_blank">
                                        {{ entry.name }}
                                    </a>
                                <td>{{ entry.slide_number }} </td>
                                <td>{{ entry.genus }} </td>
                                <td>{{ entry.species }} </td>
                                <td>{{ entry.stain }} </td>
                                <td>{{ entry.source }} </td>
                                <td>{{ entry.contributor }} </td>
                                <td>{{ entry.processing }} </td>
                                <td>{{ entry.comments }} </td>
                                <td>{{ entry.date_sent_to_aperio }} </td>
                                <td>{{ entry.infect }} </td>
                                <td>{{ entry.collection_site }} </td>
                                <td>{{ entry.histopath_description }} </td>
                                <td>{{ entry.attachment }} </td>
                                {% else %}
                                {{ entry.name }}
                                {% endif %}

                                {% if entry.children %}
                                <ul>
                                    {{ loop(entry.children) }}
                                </ul>
                                {% endif %}
                                </th>

                            </tr>
                            {% else %}
                            <li class="none">None</li>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->
<!-- partial -->
  <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js'></script>
<script  src="/static/script.js"></script>
<script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>

</body>
</html>
