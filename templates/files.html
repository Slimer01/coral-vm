<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Slide List - Coral Virtual Microscope</title>
    <script>
			function liveSearch(value){
				value = value.trim(); // remove any spaces around the text
					$.ajax({
						url: "search",
						data: {searchText: value},
						dataType: "json",
						success: function(data){
						$("#slideTable > tbody").html("");
                        $.each(data, function(index, element) {
                                    for (i = 0; i < element.length; i++) {
                                        $("#slideTable tbody").append(
                                              "<tr>" +
                                                    "<td><b><a href='"+element[i]["filename"]+"' target='_blank'><i class='fas fa-microscope'></i></a></b></td>" +
                                                    "<td>"+element[i]["number"]+"</td>" +
                                                    "<td>"+element[i]["genus"]+"</td>" +
                                                    "<td>"+element[i]["species"]+"</td>" +
                                                    "<td>"+element[i]["stain"]+"</td>" +
                                                    "<td>"+element[i]["source"]+"</td>" +
                                                    "<td>"+element[i]["contributor"]+"</td>" +
                                                    "<td>"+element[i]["processing"]+"</td>" +
                                                    "<td>"+element[i]["comments"]+"</td>" +
                                                    "<td>"+element[i]["date_sent_to_aperio"]+"</td>" +
                                                    "<td>"+element[i]["infect"]+"</td>" +
                                                    "<td>"+element[i]["collection_site"]+"</td>" +
                                                    "<td>"+element[i]["histopathologic_description"]+"</td>" +
                                                    "<td>"+element[i]["attachment"]+"</td>" +
                                              "</tr>"
                                        );

                                    }
                                });
						}

					});
			}
            function toggleColumnChoice() {
              var x = document.getElementById("columnChoice");
              if (x.style.display === "none") {
                x.style.display = "block";
              } else {
                x.style.display = "none";
              }
            }
		</script>
</head>
<body>

<div id="wrapper" class="wrapper d-flex align-items-stretch">
    {% include 'sidebar.html' %}
    <div id="content" class="p-4 p-md-5 pt-5">

        <div class="btn-toolbar mb-3 justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
            <div class="input-group">
                <input type="text" class="form-control" onkeyup="liveSearch(this.value)" placeholder="Slide Search" aria-label="Input group example" aria-describedby="btnGroupAddon">
            </div>
            <div class="btn-group mr-2" role="group" aria-label="First group">
                <i class="fas fa-chevron-circle-down" onclick="toggleColumnChoice()"></i>
            </div>
        </div>
        <div class="btn-group-toggle" style="display:none" id="columnChoice">
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                <label class="form-check-label" for="inlineRadio2">Slide Number</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio3" value="option3">
                <label class="form-check-label" for="inlineRadio3">Genus</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio4" value="option3">
                <label class="form-check-label" for="inlineRadio4">Species</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio5" value="option3">
                <label class="form-check-label" for="inlineRadio5">Stain</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio6" value="option3">
                <label class="form-check-label" for="inlineRadio6">Source</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio7" value="option3">
                <label class="form-check-label" for="inlineRadio7">Contributor</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio8" value="option3">
                <label class="form-check-label" for="inlineRadio8">Processing</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio9" value="option3">
                <label class="form-check-label" for="inlineRadio9">Comments</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio10" value="option3">
                <label class="form-check-label" for="inlineRadio10">Infect/Non</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio11" value="option3">
                <label class="form-check-label" for="inlineRadio11">Collection Site</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio12" value="option3">
                <label class="form-check-label" for="inlineRadio12">Histopathologic Description</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="inlineRadioOptions" id="inlineRadio13" value="option3">
                <label class="form-check-label" for="inlineRadio13">Attachment</label>
            </div>
        </div>
        <div id="results"></div> <!-- Results will be printed here -->
        <table border="1px" id="slideTable" class="table table-striped table-hover">
            <thead>
            <tr >
                <th scope="col">View</th>
                <th scope="col">Slide Number</th>
                <th scope="col">Genus</th>
                <th scope="col">Species</th>
                <th scope="col">Stain</th>
                <th scope="col">Source</th>
                <th scope="col">Contributor</th>
                <th scope="col">Processing</th>
                <th scope="col">Comments</th>
                <th scope="col">Date Sent to Aperio</th>
                <th scope="col">Infect/Non</th>
                <th scope="col">Collection Site</th>
                <th scope="col">Histopathologic Description</th>
                <th scope="col">Attachment</th>

            </tr>
            </thead>
            {% for entry in root_dir.children recursive %}
            <tr>
                <th scope="row">
                    {% if entry.url_path %}
                    <a href="{{ url_for('slide', path=entry.url_path) }}" target="_blank">
                        <i class='fas fa-microscope'></i>
                    </a>
                <td>{{ entry.genus }} </td>
                <td>{{ entry.species }} </td>
                <td>{{ entry.stain }} </td>
                <td>{{ entry.source }} </td>
                <td>{{ entry.contributor }} </td>
                <td>{{ entry.processing }} </td>
                <td>{{ entry.comments }} </td>
                <td>{{ entry.date_sent_to_aperio }} </td>
                <td>{{ entry.infect }} </td>
                <td>{{ entry.collection_site }} </td>
                <td>{{ entry.histopathologic_description }} </td>
                <td>{{ entry.attachment }} </td>
                {% else %}
                {{ entry.name }}
                {% endif %}

                {% if entry.children %}
                <ul>
                    {{ loop(entry.children) }}
                </ul>
                {% endif %}
                </th>

            </tr>
            {% else %}
            <li class="none">None</li>
            {% endfor %}
        </table>
    </div>
</div>
</body>
</html>
